<style type="text/css">.angular-google-map-container{height:300px;}</style>

<div class="page-heading">
    <div class="container"> 
        <div class="spacing-25"></div>
        <div class="row">
            <div class="col-xs-6"><h1>Discover</h1></div>
        </div>
        <div class="spacing-25"></div>
    </div>
</div>

<div class="container">
	<div class="spacing-10"></div>
	<div class="spacing-10"></div>
	<ul style="padding:0px;" class="member-tabs">
		<li class="active"><a href="#">Activity</a></li>
		<li><a href="/content">Content</a></li>
		<li><a href="/marketplace">Items</a></li>
		<li><a href="/members">Members</a></li>
		<li><a href="/market">Orders</a></li>
		<li><a href="/projects">Projects</a></li>
		<li><a href="/tasks">Tasks</a></li>
	</ul>
</div>

<div class="container">
	<ul style="padding:0px;" class="member-tabs">
	    <li style="float:left;font-size:14px"><a href="#" ng-click="filterToggle()"><i class="fa fa-filter"></i> Filter</a></li>
	    <li style="float:left;font-size:14px"><a href="#" ng-click="filterToggle()"><i class="fa fa-map-marker"></i> Location</a></li>
	    <li style="float:right;font-size:14px"><a href="#">Sort By Recent <i class="fa fa-angle-down"></i></a></li>
	</ul>
	<div style="clear:both"></div>
</div>

<!--TODO: FILTER / SEARCH -->
<div class="container">
	<div class="">
	    <div class="card">
	        <form ng-submit="search()" style="display:flex;flex-direction:row;">
	            <input style="border:0px;flex-grow:2;" class="form-control" type="text" placeholder= "Seach | Filter" ng-model="searchQuery">
	            <div ng-click="search()" style="border:0px;float:right" class="btn btn-default">
	                <a href="#" role="button">
	                    <h5 style="color:black;text-align:right" class="noselect">Search <i class="fa fa-search"></i></h5>
	                </a>
	            </div>
	        </form>
	    </div>
	</div>
</div>

<!--
<div class="container">
	<div class="card">
		<ui-gmap-google-map center="map.center" zoom="map.zoom" options="options">
		    <ui-gmap-marker ng-repeat="marker in markers" coords="marker.coords" options="marker.options" idkey="marker.id">
		        <ui-gmap-window options="windowOptions" closeClick="closeClick()">
		            <div>
		                <div style="font-size: 15px;"><a href="#">{{marker.content}}</a></div>
		            </div>
		        </ui-gmap-window>
		    </ui-gmap-marker>
		</ui-gmap-google-map>
	</div>
</div>
-->

<!--DISCOVER BLOCK-->

<div class="container">
	<div class="spacing-10"></div>
	<div class="col-lg-4 col-sm-6" ng-repeat="item in members">
		<div class="member-card" style="margin-bottom:10px" ng-click="renderReputationToggle(item)">
		    <div class="member-card-image" style="background-image: url('{{item.coverUrl}}')">
		        <a ng-click="$event.stopPropagation()" href="member/{{item.username}}"><img ng-src="{{item.avatarUrl}}" err-src="/images/avatar.png"></a>
		    </div>
		    <div class="member-card-info">
		        <h4><a href="member/{{item.username}}">{{item.username}}</a></h4>
		        <p style="color:gray">{{item.status}} offline</p>
		        <p style="color:gray">Total Reputation | {{item.totalWork}}</p>
		    </div>
		</div>
	</div>
</div>

<div class="container">
	<div ng-repeat="item in projects.slice(0,10)">
        <div class="card" ng-click="">
            <div style="padding:16px;">
                <div class="row">
                    <div class="col-sm-1 col-xs-2"><a href="/project/{{item.urlTitle}}"><img style="width:100%;height:100%" src="{{item.avatarUrl}}"></a></div>
                    <div class="col-sm-11 col-xs-10">
                        <h3 style="margin-top:0px"><a href="/project/{{item.urlTitle}}">{{item.title}}</a></h3>
                        <div style="max-height:500px;overflow:scroll"><span ng-bind-html="renderContent(item.description)"></span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container">
	<div ng-repeat="item in tasks">
		<div class="card" ng-click="renderToggle(item)">
			<div style="padding:16px;">
				<div style="float:right">
                    <h5 style="text-align:right" ng-click="$event.stopPropagation();tokensToggle(item)"><a href="#">Tokens <i class="fa fa-question-circle"></i></a></h5>
                </div>

				<h4><a ng-click="$event.stopPropagation()" href="task/{{item.id}}">{{item.title}}</a></h4>
				<p><a ng-click="$event.stopPropagation()" href="project/{{item.project.urlTitle}}">{{item.project.title}}</a></p>
				<p><a ng-click="$event.stopPropagation()" ng-repeat="tag in item.tags track by $index" href="market/{{tag.trim()}}">{{tag.trim()}} </a></p>
            	<p><span style="display:inline" ng-bind-html="renderContent(item.content)"></span></p>
				<span style="color:gray" am-time-ago="item.createdAt"></span>

			</div>
			<div class="card-footer">
				<a ng-click="$event.stopPropagation();createReaction(item, 'plus')"><i class="fa fa-angle-up"></i> {{item.reactions.plus}} like </a> 
				<a ng-click="$event.stopPropagation();createReaction(item, 'minus')" ><i class="fa fa-angle-down"></i> {{item.reactions.minus}} dislike </a>
				<a ng-click="$event.stopPropagation();reply(item)" href="task/{{item.id}}"><i class="fa fa-comment-o"></i> comment </a>
				<a ng-click="$event.stopPropagation();reply(item)" href="task/{{item.id}}" style="padding:0px" class="pull-right"><i class="fa fa-link grey"></i></a>
			</div>
		</div>
	</div>
</div>

<div class="container">
	<div class="card" style="text-align:center" ng-click="loadMore()">
	    <button style="width:100%" class="btn btn-default log-btn">MORE <i class="fa fa-angle-down"></i></button>
	</div>
</div>

<div class="spacing-50"></div>