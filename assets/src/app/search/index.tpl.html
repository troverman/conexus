<div ui-view="search">
	<div class="page-heading">
		<div class="container"> 
			<div class="spacing-25"></div>
			<h1>{{searchQuery.search}}</h1>
			<div class="spacing-25"></div>
		</div>
	</div>

	<!--MODEL FILTERS-->
	<div ng-if="searchResults.length > 0" class="container">
		<div class="spacing-10"></div>
		<div class="spacing-10"></div>
		<div class="row">
			<ul style="padding:0px;" class="member-tabs">
				<li class="active"><a href="">Activity</a></li>
				<li><a href="/content">Content</a></li>
				<li><a href="/marketplace">Items</a></li>
				<li><a href="/members">Members</a></li>
				<li><a href="/market">Orders</a></li>
				<li><a href="/projects">Projects</a></li>
				<li><a href="/tasks">Tasks</a></li>
				<li style="float:right;font-size:14px"><a>Sort By Recent <i class="fa fa-angle-down"></i></a></li>
			</ul>
		</div>
	</div>

	<!--LOCATION FILTERS-->
	<!--SEARCH FILTERS-->

	<!--TAG FILTERS-->
	<!--{{tags}}-->
	
	<!--TOKEN FILTERS-->
	<!--Protocol | Context-->
	<!--Market Discoverability-->
	<!--Orders-->

	<!--RESULTS-->
	<!--SORT-->

	<div class="container">

		<div class="row">

			<div class="card">
		        <form ng-submit="search()" style="display:flex;flex-direction:row;">
		            <input style="border:0px;flex-grow:2;" class="form-control" type="text" placeholder="Search | Filter" ng-model="searchQuery.search">
		            <div ng-click="search()" style="border:0px" class="btn btn-default" style="float:right">
		                <a role="button">
		                    <h5 style="color:black;text-align:right" class="noselect">Search <i class="fa fa-search"></i></h5>
		                </a>
		            </div>
		        </form>
		    </div>

			<div ng-if="searchResults.length > 0" class="card">
		        <style type="text/css">.angular-google-map-container{height: 200px;}</style>
		        <ui-gmap-google-map center="map.center" zoom="map.zoom" options="options"></ui-gmap-google-map>
		    </div>

			<div ng-if="searchResults.length == 0" class="card">
		        <div style="padding:16px;">
		            <span style="color:gray">There's nothing here..</span>
		        </div>
		    </div>

			<div ng-if="searchResults.length > 0" ng-repeat="item in searchResults">

				<div ng-if="item.model=='CONTENT'" class="card" ng-click="renderToggle(item)">
			        <div style="padding:16px;">
			            <div>
			                <img class="card-avatar" ng-src="{{item.user.avatarUrl}}" src="{{item.user.avatarUrl}}" err-src="images/avatar.png">
			                <a ng-click="$event.stopPropagation();" style="display:inline;font-weight:600;margin-left:5px" href="/member/{{item.user.username}}">{{item.user.username}}</a>
			                <div style="display:inline;" ng-show="item.profile != item.user.id && item.profile != member.id">
			                    <p style="display:inline"><i class="fa fa-angle-right"></i></p>
			                    <a ng-click="$event.stopPropagation();" ng-show="item.market" style="display:inline;font-weight:600" href="market/{{item.market}}">market {{item.market}}</a>
			                    <a ng-click="$event.stopPropagation();" ng-show="item.order" style="display:inline;font-weight:600" href="order/{{item.order}}">order {{item.order}}</a>
			                    <a ng-click="$event.stopPropagation();" ng-show="item.contentModel" style="display:inline;font-weight:600" href="content/{{item.contentModel}}">content {{item.contentModel}}</a>
			                    <a ng-click="$event.stopPropagation();" ng-show="item.profile" style="display:inline;font-weight:600" href="member/{{item.profile}}">profile {{item.profile}}</a>
			                    <a ng-click="$event.stopPropagation();" ng-show="item.project" style="display:inline;font-weight:600" href="project/{{item.project.urlTitle}}">{{item.project.title}}</a>
			                    <a ng-click="$event.stopPropagation();" ng-show="item.task" style="display:inline;font-weight:600" href="task/{{item.task}}">task {{item.task}}</a>
			                    <a ng-click="$event.stopPropagation();" ng-show="item.time" style="display:inline;font-weight:600" href="time/{{item.time}}">time {{item.time}}</a>
			                </div>
			                <p style="display:inline;font-size:10px;color:gray;margin-left:5px" am-time-ago="item.createdAt"></p>
							
							<p ng-click="tokensToggle(item);$event.stopPropagation()" style="display:inline;float:right"><a>Tokens <i class="fa fa-question-circle"></i></a></p>

			            </div>
			            <div style="margin-left:42px"><span style="display:inline" ng-bind-html="renderContent(item.content)"></span></div>
			        </div>
			        <div class="card-footer">
			            <a ng-click="$event.stopPropagation();createReaction(item, 'plus')"><i class="fa fa-angle-up"></i> {{item.reactions.plus}} like </a> 
						<a ng-click="$event.stopPropagation();createReaction(item, 'minus')" ><i class="fa fa-angle-down"></i> {{item.reactions.minus}} dislike </a>
			            <a ng-click="$event.stopPropagation();reply(item)"><i class="fa fa-comment-o"></i> comment </a>
			            <a ng-click="$event.stopPropagation();" style="padding:0px" class="pull-right" href="content/{{item.id}}"><i class="fa fa-link grey"></i></a>
			        </div>
			        <div ng-click="$event.stopPropagation();" ng-show="item.showReply" class="card-footer">
			            <form role="form" ng-submit="createContent(item)">
							<text-angular ng-model="newContent.content" ta-toolbar="[['p','h1','h2','bold','italics','quote','pre','insertLink', 'html']]"></text-angular>
			                <button type="submit" style="width:100%" class="btn btn-default log-btn" ng-disabled="!newContent.content">create</button>
			            </form>
			        </div>
		    	</div>

				<div ng-if="item.model=='MEMBER'">
					<div class="row" style="margin:0px">
						<div class="col-xs-12" style="padding:0px">
							<div class="member-card card" style="margin-bottom:0px" ng-click="renderReputationToggle(item)">
							    <div class="member-card-image" style="background-image: url('{{item.coverUrl}}')">
							        <a ng-click="$event.stopPropagation();" href="member/{{item.username}}"><img ng-src="{{item.avatarUrl}}" err-src="/images/avatar.png"></a>
							    </div>
							    <div class="member-card-info">
							        <h4><a ng-click="$event.stopPropagation();" href="member/{{item.username}}">{{item.username}}</a></h4>
							        <p style="color:gray">{{item.status}} offline</p>
							        <p style="color:gray">Total Reputation | {{item.totalWork}}</p>
							    </div>
							</div>
						</div>
					</div>
				</div>

				<div ng-if="item.model=='ORDER'" class="card" ng-click="renderToggle(item)"></div>

				<div ng-if="item.model=='PROJECT'" class="card" ng-click="">
		            <div style="padding:16px;">
		                <div class="row">
		                    <div class="col-sm-1 col-xs-2">
	                        	<a href="project/{{item.urlTitle}}"><img style="width:50px;height:50px;max-width:1000%" src="{{item.avatarUrl}}" err-src="/images/avatar.png"></a>
		                    </div>
		                    <div class="col-sm-11 col-xs-10">
		                        <h3 style="margin-top:0px">
		                            <a href="/project/{{item.urlTitle}}">
		                                {{item.title}}
		                            </a>
		                        </h3>
	                        	<p style="color:gray;font-style:italic;"><span ng-bind-html="renderContent(project.description)"></span></p>
		                    </div>
		                
		                </div>
		            </div>
				</div>

				<div ng-if="item.model=='TASK'" class="card" ng-click="renderToggle(item)">
					<div style="padding:16px;">
						<div class="row">
							<div class="col-sm-10">
								<h4><a ng-click="$event.stopPropagation();" href="task/{{item.id}}">{{item.title}}</a></h4>
								<p><a ng-click="$event.stopPropagation();" href="project/{{item.project.urlTitle}}">{{item.project.title}}</a></p>
								<p><a ng-click="$event.stopPropagation();" ng-repeat="tag in item.tags.split(',')" href="market/{{tag.trim()}}">{{tag.trim()}} </a></p>
								<p><span ng-bind-html="renderContent(item.content)"></span></p>
								<span style="color:gray" am-time-ago="item.createdAt"></span>
							</div>
							<div class="col-sm-2" style="text-align:right">
								<p ng-click="$event.stopPropagation();tokensToggle(item)"><a >Tokens <i class="fa fa-question-circle"></i></a></p>
							</div>
						</div>
					</div>
					<div class="card-footer">
						<a ng-click="$event.stopPropagation();createReaction(item, 'plus')"><i class="fa fa-angle-up"></i> {{item.reactions.plus}} like </a> 
						<a ng-click="$event.stopPropagation();createReaction(item, 'minus')" ><i class="fa fa-angle-down"></i> {{item.reactions.minus}} dislike </a>
						<a ng-click="$event.stopPropagation();reply(item)"><i class="fa fa-comment-o"></i> comment </a>
	        			<a ng-click="$event.stopPropagation();" style="padding:0px" class="pull-right" href="task/{{item.id}}"><i class="fa fa-link grey"></i></a>
					</div>
					<div ng-click="$event.stopPropagation();" ng-show="item.showReply" class="card-footer">
						<form role="form" ng-submit="createContent(item)">
							<text-angular ng-model="newContent.content" ta-toolbar="[['p','h1','h2','bold','italics','quote','pre','insertLink', 'html']]"></text-angular>
							<button type="submit" style="width:100%" class="btn btn-default log-btn" ng-disabled="!newContent.content">create</button>
						</form>
					</div>
				</div>

				<!--TODO-->
				<div ng-if="item.model=='TIME'" class="card"></div>

			</div>

			<div ng-if="searchResults.length > 0" class="card" style="text-align:center" ng-click="loadMore()">
                <button style="width:100%" class="btn btn-default log-btn">MORE <i class="fa fa-angle-down"></i></button>
            </div>

		</div>
	</div>

	<div class="spacing-50"></div>
</div>