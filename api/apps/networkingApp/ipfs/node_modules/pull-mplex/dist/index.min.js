!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PullMplex=e():t.PullMplex=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=23)}([function(t,e,n){"use strict";t.exports=function(t,e){var n,r;function o(i){if(n=i,r)return o.abort();!function o(){for(var i=!0,u=!1;i;)if(u=!1,n(null,function(s,f){if(u=!0,s=s||r){if(i=!1,e)e(!0===s?null:s);else if(s&&!0!==s)throw s}else t&&!1===t(f)||r?(i=!1,n(r||!0,e||function(){})):i||o()}),!u)return void(i=!1)}()}return o.abort=function(t,e){if("function"==typeof t&&(e=t,t=!0),r=t||!0,n)return n(r,e||function(){})},o}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return t&&("string"==typeof t?function(e){return e[t]}:"object"===r(t)&&"function"==typeof t.exec?function(e){var n=t.exec(e);return n&&n[0]}:t)}},function(t,e,n){"use strict";(function(r){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.log=function(){var t;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(t=console).log.apply(t,arguments)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(o=r))}),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(n){}!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(47)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(3))},function(t,e,n){"use strict";var r,o,i=t.exports={};function u(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function f(t){if(r===setTimeout)return setTimeout(t,0);if((r===u||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:u}catch(t){r=u}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var c,a=[],l=!1,h=-1;function p(){l&&c&&(l=!1,c.length?a=c.concat(a):h=-1,a.length&&y())}function y(){if(!l){var t=f(p);l=!0;for(var e=a.length;e;){for(c=a,a=[];++h<e;)c&&c[h].run();h=-1,e=a.length}c=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new d(t,e)),1!==a.length||l||f(y)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){if(!t)return function(t,n){return t?r(n,t,e):n(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(e){return t[e]}));var n=0;return function(o,i){if(o)return r(i,o,e);n>=t.length?i(!0):i(null,t[n++])}}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t,e,n){n||(n=e,e=null);var o=r(function(n){e=t(e,n)},function(t){n(t,e)});return 2===arguments.length?function(t){t(null,function(r,i){if(r)return n(!0===r?null:r);e=i,o(t)})}:o}},function(t,e,n){"use strict";var r=n(13);t.exports=function(t){return t=r(t),function(e){return function n(r,o){for(var i,u=!0;u;)u=!1,i=!0,e(r,function(e,r){if(!e&&!t(r))return i?u=!0:n(e,o);o(e,r)}),i=!1}}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(i){"object"===("undefined"==typeof window?"undefined":r(window))&&(o=window)}t.exports=o},function(t,e,n){"use strict";(function(r,o){Object.defineProperty(e,"__esModule",{value:!0});var i,u=n(55);i=u.hasNextTick?r.nextTick:u.hasSetImmediate?o:u.fallback,e.default=(0,u.wrap)(i),t.exports=e.default}).call(this,n(3),n(20).setImmediate)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,i="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))?Reflect:null,u=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};o=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function f(){f.init.call(this)}t.exports=f,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var c=10;function a(t){return void 0===t._maxListeners?f.defaultMaxListeners:t._maxListeners}function l(t,e,n,o){var i,u,s,f;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(n));if(void 0===(u=t._events)?(u=t._events=Object.create(null),t._eventsCount=0):(void 0!==u.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),u=t._events),s=u[e]),void 0===s)s=u[e]=n,++t._eventsCount;else if("function"==typeof s?s=u[e]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(i=a(t))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,f=c,console&&console.warn&&console.warn(f)}return t}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,u(this.listener,this.target,t))}.bind(r);return o.listener=n,r.wrapFn=o,o}function p(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):d(o,o.length)}function y(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),f.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},f.prototype.getMaxListeners=function(){return a(this)},f.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var f=o[t];if(void 0===f)return!1;if("function"==typeof f)u(f,this,e);else{var c=f.length,a=d(f,c);for(n=0;n<c;++n)u(a[n],this,e)}return!0},f.prototype.addListener=function(t,e){return l(this,t,e,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(t,e){return l(this,t,e,!0)},f.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(e));return this.on(t,h(this,t,e)),this},f.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(e));return this.prependListener(t,h(this,t,e)),this},f.prototype.removeListener=function(t,e){var n,o,i,u,s;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(e));if(void 0===(o=this._events))return this;if(void 0===(n=o[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,u=n.length-1;u>=0;u--)if(n[u]===e||n[u].listener===e){s=n[u].listener,i=u;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(o[t]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",t,s||e)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},f.prototype.listeners=function(t){return p(this,t,!0)},f.prototype.rawListeners=function(t){return p(this,t,!1)},f.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},f.prototype.listenerCount=y,f.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(t,e,n){"use strict";var r=n(26),o=n(32),i=n(38);for(var u in(e=t.exports=n(46)).pull=e,r)e[u]=r[u];for(var u in i)e[u]=i[u];for(var u in o)e[u]=o[u]},function(t,e,n){"use strict";t.exports=function(t,e,n){t(e),n&&n(!0===e?null:e)}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){return function(n,o){if(n)return r(o,n,e);if(null!=t){var i=t;t=null,o(null,i)}else o(!0)}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(1);function i(t){return t}t.exports=function(t){return"object"===r(t)&&"function"==typeof t.test?function(e){return t.test(e)}:o(t)||i}},function(t,e,n){"use strict";function r(t){return t}var o=n(1),i=n(6);t.exports=function(t,e){t=o(t)||r;var n={};return i(function(r){var o=t(r);return n[o]?!!e:(n[o]=!0,!e)})}},function(t,e,n){"use strict";t.exports="/mplex/6.7.0"},function(t,e,n){"use strict";(function(t){var r=n(50),o=n(51),i=n(52);function u(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(u()<e)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=f.prototype:(null===t&&(t=new f(e)),t.length=e),t}function f(t,e,n){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);f.TYPED_ARRAY_SUPPORT?(t=e).__proto__=f.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!f.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(e,n),o=(t=s(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(f.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(a(e),t=s(t,e<0?0:0|p(e)),!f.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|t}function y(t,e){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(t).length;default:if(r)return Y(t).length;e=(""+e).toLowerCase(),r=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=f.from(e,r)),f.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,o);if("number"==typeof e)return e&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,o){var i,u=1,s=t.length,f=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;u=2,s/=2,f/=2,n/=2}function c(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}if(o){var a=-1;for(i=n;i<s;i++)if(c(t,i)===c(e,-1===a?0:i-a)){if(-1===a&&(a=i),i-a+1===f)return a*u}else-1!==a&&(i-=i-a),a=-1}else for(n+f>s&&(n=s-f),i=n;i>=0;i--){for(var l=!0,h=0;h<f;h++)if(c(t,i+h)!==c(e,h)){l=!1;break}if(l)return i}return-1}function g(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var u=0;u<r;++u){var s=parseInt(e.substr(2*u,2),16);if(isNaN(s))return u;t[n+u]=s}return u}function b(t,e,n,r){return z(Y(e,t.length-n),t,n,r)}function w(t,e,n,r){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return w(t,e,n,r)}function C(t,e,n,r){return z(D(e),t,n,r)}function E(t,e,n,r){return z(function(t,e){for(var n,r,o,i=[],u=0;u<t.length&&!((e-=2)<0);++u)n=t.charCodeAt(u),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,u,s,f,c=t[o],a=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=n)switch(l){case 1:c<128&&(a=c);break;case 2:128==(192&(i=t[o+1]))&&(f=(31&c)<<6|63&i)>127&&(a=f);break;case 3:i=t[o+1],u=t[o+2],128==(192&i)&&128==(192&u)&&(f=(15&c)<<12|(63&i)<<6|63&u)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:i=t[o+1],u=t[o+2],s=t[o+3],128==(192&i)&&128==(192&u)&&128==(192&s)&&(f=(15&c)<<18|(63&i)<<12|(63&u)<<6|63&s)>65535&&f<1114112&&(a=f)}null===a?(a=65533,l=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=l}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=f,e.SlowBuffer=function(t){+t!=t&&(t=0);return f.alloc(+t)},e.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=u(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,e,n){return c(null,t,e,n)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,e,n){return function(t,e,n,r){return a(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},f.allocUnsafe=function(t){return l(null,t)},f.allocUnsafeSlow=function(t){return l(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,e){if(!f.isBuffer(t)||!f.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=f.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var u=t[n];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(r,o),o+=u.length}return r},f.byteLength=y,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,e,n,r,o){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),u=(n>>>=0)-(e>>>=0),s=Math.min(i,u),c=this.slice(r,o),a=t.slice(e,n),l=0;l<s;++l)if(c[l]!==a[l]){i=c[l],u=a[l];break}return i<u?-1:u<i?1:0},f.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},f.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},f.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},f.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return g(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function T(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function R(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=N(t[i]);return o}function P(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,n,r,o,i){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function M(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function F(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,i){return i||F(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return i||F(t,0,n,8),o.write(t,e,n,r,52,8),n+8}f.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),f.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=f.prototype;else{var o=e-t;n=new f(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},f.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},f.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},f.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},f.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},f.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),o.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),o.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||k(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},f.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||k(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},f.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},f.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},f.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},f.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},f.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},f.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);k(this,t,e,n,o-1,-o)}var i=0,u=1,s=0;for(this[e]=255&t;++i<n&&(u*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+n},f.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);k(this,t,e,n,o-1,-o)}var i=n-1,u=1,s=0;for(this[e+i]=255&t;--i>=0&&(u*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/u>>0)-s&255;return e+n},f.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},f.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},f.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},f.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},f.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},f.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},f.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},f.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},f.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!f.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},f.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var u=f.isBuffer(t)?t:Y(new f(t,r).toString()),s=u.length;for(i=0;i<n-e;++i)this[i+e]=u[i%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],u=0;u<r;++u){if((n=t.charCodeAt(u))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(u+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function D(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(7))},function(t,e,n){"use strict";t.exports=function(t,e){"function"==typeof t&&(e=t,t=!1);var n,r,o,i=[];function u(t,e){t&&(n=t,r&&a(n)),r=e,c()}function s(t){o=o||t||!0,c()}function f(t){o||(r?a(n,t):i.push(t))}if(t)return{push:f,end:s,source:u,buffer:i};return u.push=f,u.end=s,u.buffer=i,u;function c(){r&&(n?a(n):!i.length&&o?a(o):i.length&&a(null,i.shift()))}function a(t,n){var o=r;if(t&&e){var i=e;e=null,i(!0===t?null:t)}r=null,o(t,n)}}},function(t,e,n){"use strict";var r=n(53);t.exports=function(t,e){return function(n){var o,i,u=[];function s(t){u.push(t)}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var f,c={emit:function(t,e){"data"==t&&s(e),"end"==t&&(o=!0,s(null)),"error"==t&&(i=e)},queue:s};return function(s,a){if(o=o||s,s)return n(s,function(){if(f){var t=f;f=null,t(s)}a(s)});f=a,r(function r(s){if(f)if(a=f,i)f=null,a(i);else if(u.length){var l=u.shift();f=null,a(null===l,l)}else n(o,function(u,l){if(u&&!0!==u)return i=u,s();if(o=o||u)e.call(c);else if(null!==l&&(t.call(c,l),i||o))return n(i||o,function(){f=null,a(i||o)});s(r)})})}}}},function(t,e,n){"use strict";t.exports=function(t){var e=!1,n=0;return function(){if(n=!0,!e){for(e=!0;n;)n=!1,t();e=!1}}}},function(t,e,n){"use strict";(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(54),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||void 0,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||void 0}).call(this,n(7))},function(t,e,n){"use strict";t.exports.emitError=function(t,e){t.emit("error",e)},t.exports.emitStream=function(t,e,n){t.emit("stream",e,n)}},function(t,e,n){"use strict";e.Types={NEW:0,IN_MESSAGE:1,OUT_MESSAGE:2,IN_CLOSE:3,OUT_CLOSE:4,IN_RESET:5,OUT_RESET:6},e.MAX_MSG_SIZE=1<<20},function(t,e,n){t.exports=n(24)},function(t,e,n){"use strict";var r=n(25),o=n(10),i=n(2),u=n(15),s=n(49),f=n(63),c=i("pull-plex");function a(t,e){var n=new s(!e),i=r();o(t,n,i,t);var u=new f(t,n);return u.once("error",function(t){c.err("got error",t),i.abort(t)}),u.on("close",function(){c("closing muxer"),i.abort()}),u}c.err=i("pull-plex:err"),(e=t.exports=a).pullMplex=s,e.multicodec=u,e.dialer=function(t){return a(t,!1)},e.listener=function(t){return a(t,!0)}},function(t,e,n){"use strict";t.exports=function(t){var e,n,r=!1,o=!1;function i(){if(t)return t(r&&!0!==r?r:o&&!0!==o?o:null)}function u(){o=o||!0,function(t){i();var n=e;e=null,n&&n(r||o)}(),n&&n(r,function(t){e&&e(t||r)})}function s(t){return n=t,function(n,u){if(e=u,n&&(r=n),o)return u(o);r||t(n,function(u,s){if(r)return!n&&t(r,function(){});if(e){var f=e;e=null,u?(o=r||u,i(),f(r||u)):f(r||u,s)}})}}return s.abort=function(t){o||(r=t||!0,u())},s}},function(t,e,n){"use strict";t.exports={keys:n(27),once:n(12),values:n(4),count:n(28),infinite:n(29),empty:n(30),error:n(31)}},function(t,e,n){"use strict";var r=n(4);t.exports=function(t){return r(Object.keys(t))}},function(t,e,n){"use strict";t.exports=function(t){var e=0;return t=t||1/0,function(n,r){return n?r&&r(n):e>t?r(!0):void r(null,e++)}}},function(t,e,n){"use strict";t.exports=function(t){return t=t||Math.random,function(e,n){return e?n&&n(e):n(null,t())}}},function(t,e,n){"use strict";t.exports=function(){return function(t,e){e(!0)}}},function(t,e,n){"use strict";t.exports=function(t){return function(e,n){n(t)}}},function(t,e,n){"use strict";t.exports={drain:n(0),onEnd:n(33),log:n(34),find:n(35),reduce:n(5),collect:n(36),concat:n(37)}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){return r(null,t)}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){return r(function(t){console.log(t)},t)}},function(t,e,n){"use strict";function r(t){return t}var o=n(1),i=n(0);t.exports=function(t,e){var n=!1;return e?t=o(t)||r:(e=t,t=r),i(function(r){if(t(r))return n=!0,e(null,r),!1},function(t){n||e(!0===t?null:t,null)})}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t){return r(function(t,e){return t.push(e),t},[],t)}},function(t,e,n){"use strict";var r=n(5);t.exports=function(t){return r(function(t,e){return t+e},"",t)}},function(t,e,n){"use strict";t.exports={map:n(39),asyncMap:n(40),filter:n(6),filterNot:n(41),through:n(42),take:n(43),unique:n(14),nonUnique:n(44),flatten:n(45)}},function(t,e,n){"use strict";function r(t){return t}var o=n(1);t.exports=function(t){return t?(t=o(t),function(e){return function(n,r){e(n,function(n,o){try{o=n?null:t(o)}catch(i){return e(i,function(){return r(i)})}r(n,o)})}}):r}},function(t,e,n){"use strict";function r(t){return t}var o=n(1);t.exports=function(t){if(!t)return r;t=o(t);var e,n,i=!1;return function(r){return function o(u,s){if(n)return s(n);u?(n=u,r(u,i?function(t){i?e=s:s(u)}:function(t){s(u)})):r(null,function(r,u){r?s(r):n?s(n):(i=!0,t(u,function(t,r){i=!1,n?(s(n),e&&e(n)):t?o(t,s):s(null,r)}))})}}}},function(t,e,n){"use strict";var r=n(13),o=n(6);t.exports=function(t){return t=r(t),o(function(e){return!t(e)})}},function(t,e,n){"use strict";t.exports=function(t,e){var n=!1;function r(t){!n&&e&&(n=!0,e(!0===t?null:t))}return function(e){return function(n,o){return n&&r(n),e(n,function(e,n){e?r(e):t&&t(n),o(e,n)})}}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=(e=e||{}).last||!1,r=!1;if("number"==typeof t){n=!0;var o=t;t=function(){return--o}}return function(e){function o(t){e(!0,function(e){n=!1,t(e||!0)})}return function(i,u){r&&!i?n?o(u):u(r):(r=i)?e(r,u):e(null,function(e,i){(r=r||e)?u(r):t(i)?u(null,i):(r=!0,n?u(null,i):o(u))})}}}},function(t,e,n){"use strict";var r=n(14);t.exports=function(t){return r(t,!0)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(4),i=n(12);t.exports=function(){return function(t){var e;return function(n,u){function s(){e(null,function(e,n){!0===e?f():e?t(!0,function(t){u(e)}):u(null,n)})}function f(){e=null,t(null,function(t,n){if(t)return u(t);Array.isArray(n)||n&&"object"===r(n)?n=o(n):"function"!=typeof n&&(n=i(n)),e=n,s()})}n?e?e(n,function(e){t(e||n,u)}):t(n,u):e?s():f()}}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function t(e){var n=arguments.length;if("function"==typeof e&&1===e.length){for(var o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e){if(null==o)throw new TypeError("partial sink should only be called once!");var r=o;switch(o=null,n){case 1:return t(e,r[0]);case 2:return t(e,r[0],r[1]);case 3:return t(e,r[0],r[1],r[2]);case 4:return t(e,r[0],r[1],r[2],r[3]);default:return r.unshift(e),t.apply(null,r)}}}var u=e;u&&"function"==typeof u.source&&(u=u.source);for(i=1;i<n;i++){var s=arguments[i];"function"==typeof s?u=s(u):s&&"object"===r(s)&&(s.sink(u),u=s.source)}return u}},function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.exports=function(t){function e(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return o.colors[Math.abs(e)%o.colors.length]}function o(t){var n;function r(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(r.enabled){var u=r,s=Number(new Date),f=s-(n||s);u.diff=f,u.prev=n,u.curr=s,n=s,e[0]=o.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var c=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;c++;var r=o.formatters[n];if("function"==typeof r){var i=e[c];t=r.call(u,i),e.splice(c,1),c--}return t}),o.formatArgs.call(u,e),(u.log||o.log).apply(u,e)}}return r.namespace=t,r.enabled=o.enabled(t),r.useColors=o.useColors(),r.color=e(t),r.destroy=i,r.extend=u,"function"==typeof o.init&&o.init(r),o.instances.push(r),r}function i(){var t=o.instances.indexOf(this);return-1!==t&&(o.instances.splice(t,1),!0)}function u(t,e){var n=o(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return o.debug=o,o.default=o,o.coerce=function(t){return t instanceof Error?t.stack||t.message:t},o.disable=function(){var t=[].concat(r(o.names.map(s)),r(o.skips.map(s).map(function(t){return"-"+t}))).join(",");return o.enable(""),t},o.enable=function(t){var e;o.save(t),o.names=[],o.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(e=0;e<r;e++)n[e]&&("-"===(t=n[e].replace(/\*/g,".*?"))[0]?o.skips.push(new RegExp("^"+t.substr(1)+"$")):o.names.push(new RegExp("^"+t+"$")));for(e=0;e<o.instances.length;e++){var i=o.instances[e];i.enabled=o.enabled(i.namespace)}},o.enabled=function(t){if("*"===t[t.length-1])return!0;var e,n;for(e=0,n=o.skips.length;e<n;e++)if(o.skips[e].test(t))return!1;for(e=0,n=o.names.length;e<n;e++)if(o.names[e].test(t))return!0;return!1},o.humanize=n(48),Object.keys(t).forEach(function(e){o[e]=t[e]}),o.instances=[],o.names=[],o.skips=[],o.formatters={},o.selectColor=e,o.enable(o.load()),o}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=1e3,i=60*o,u=60*i,s=24*u,f=7*s,c=365.25*s;function a(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}t.exports=function(t,e){e=e||{};var n=r(t);if("string"===n&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"weeks":case"week":case"w":return n*f;case"days":case"day":case"d":return n*s;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===n&&!1===isNaN(t))return e.long?function(t){var e=Math.abs(t);if(e>=s)return a(t,e,s,"day");if(e>=u)return a(t,e,u,"hour");if(e>=i)return a(t,e,i,"minute");if(e>=o)return a(t,e,o,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=s)return Math.round(t/s)+"d";if(e>=u)return Math.round(t/u)+"h";if(e>=i)return Math.round(t/i)+"m";if(e>=o)return Math.round(t/o)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";(function(e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=n(10),a=n(17),l=n(18),h=n(19),p=n(8),y=n(9),d=n(2),v=n(21),m=v.emitError,g=v.emitStream,b=n(22),w=b.Types,_=b.MAX_MSG_SIZE,C=n(57),E=n(58),S=d("pull-plex");S.err=d("pull-plex:err");var x=function(t){function n(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}(this,u(n).call(this)),"boolean"==typeof t&&(t={initiator:t}),t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}({initiator:!0,onChan:null,maxChannels:1e4,maxMsgSize:_,lazy:!1},t),e._maxChannels=t.maxChannels,e._maxMsgSize=t.maxMsgSize,e._lazy=t.lazy,e._initiator=Boolean(t.initiator),e._chanId=0,e._inChannels=new Array(e._maxChannels/2),e._outChannels=new Array(e._maxChannels/2),e._endedRemote=!1,e._endedLocal=!1,e._chandata=a(function(t){e._log("mplex ended"),e._endedRemote=!0,e.close(t)}),t.onChan&&e.on("stream",function(e){return t.onChan(e,e.id)}),e.source=c(e._chandata,E.encode());var i=f(f(e));return e.sink=c(l(function(t){if(t&&t.length>=i._maxMsgSize)return p(m,i,new Error("message too large!")),this.queue(null);this.queue(t)}),E.decode(),function(t){var e=h(function(){t(null,function(t,n){if(!i._endedLocal){if(!0===t)return i.close();if(t)return i.destroy(t);i._handle(n),e()}})});e()}),e}var d,v,b;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(n,y),d=n,(v=[{key:"_log",value:function(t,e){S({op:t,initiator:this._initiator,endedLocal:this._endedLocal,endedRemote:this._endedRemote,data:e&&e.toString()||""})}},{key:"close",value:function(t){if(this._log("close",t),!this.destroyed){t&&p(m,this,t),t=t||"Underlying stream has been closed",this._endedLocal=!0;var e=Array.prototype.concat(this._outChannels,this._inChannels),n=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value;s&&s.close(t)}}catch(t){r=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}this.emit("close")}}},{key:"destroy",value:function(t){t=t||new Error("Underlying stream has been closed"),this._chandata.end(t),this.close(t)}},{key:"push",value:function(t){t.data&&e.byteLength(t.data)>this._maxMsgSize&&this._chandata.end(new Error("message too large!")),this._chandata.push(t)}},{key:"createStream",value:function(t){"number"==typeof t&&(t=t.toString());var e=this._newStream(null,!0,!1,t,this._outChannels);return this._lazy||e.openChan(t),e}},{key:"_newStream",value:function(t,e,n,r,o){if(this.chanSize>=this._maxChannels)this.emit("error",new Error("max channels exceeded"));else{if("string"==typeof e&&(r=e,e=!1,n=!1),"string"==typeof n&&(r=n,n=!1),!o[t="number"==typeof t?t:this._chanId++]){var i=new C({id:t,name:r,plex:this,initiator:e,open:n||!1});return this._addChan(t,i,o)}this.emit("error",new Error("channel with id ".concat(t," already exist!")))}}},{key:"_addChan",value:function(t,e,n){return e.once("close",function(){n[t]=null}),e.once("error",function(t){S.err("channel error",t)}),n[t]=e,e}},{key:"_handle",value:function(t){this._log("_handle",t);var e=t.id,n=t.type,r=t.data;switch(n){case w.NEW:var o=this._newStream(e,!1,!0,r.toString(),this._inChannels);p(g,this,o,e);break;case w.OUT_MESSAGE:case w.IN_MESSAGE:var i=(1&n?this._outChannels:this._inChannels)[e];i&&i.push(r);break;case w.OUT_CLOSE:case w.IN_CLOSE:var u=(1&n?this._outChannels:this._inChannels)[e];u&&u.close();break;case w.OUT_RESET:case w.IN_RESET:var s=(1&n?this._outChannels:this._inChannels)[e];s&&s.destroy();break;default:p(m,this,new Error("Invalid message type"))}}},{key:"initiator",get:function(){return this._initiator}},{key:"destroyed",get:function(){return this._endedRemote&&this._endedLocal}},{key:"chanSize",get:function(){return this._inChannels.size+this._outChannels.size}}])&&i(d.prototype,v),b&&i(d,b),n}();t.exports=x}).call(this,n(16).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],u=n[1],s=new i(function(t,e,n){return 3*(e+n)/4-n}(0,r,u)),f=0,a=u>0?r-4:r,l=0;l<a;l+=4)e=o[t.charCodeAt(l)]<<18|o[t.charCodeAt(l+1)]<<12|o[t.charCodeAt(l+2)]<<6|o[t.charCodeAt(l+3)],s[f++]=e>>16&255,s[f++]=e>>8&255,s[f++]=255&e;2===u&&(e=o[t.charCodeAt(l)]<<2|o[t.charCodeAt(l+1)]>>4,s[f++]=255&e);1===u&&(e=o[t.charCodeAt(l)]<<10|o[t.charCodeAt(l+1)]<<4|o[t.charCodeAt(l+2)]>>2,s[f++]=e>>8&255,s[f++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],u=0,s=n-o;u<s;u+=16383)i.push(a(t,u,u+16383>s?s:u+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,f=u.length;s<f;++s)r[s]=u[s],o[u.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function a(t,e,n){for(var o,i,u=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),u.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return u.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e,n){"use strict";e.read=function(t,e,n,r,o){var i,u,s=8*o-r-1,f=(1<<s)-1,c=f>>1,a=-7,l=n?o-1:0,h=n?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-a)-1,p>>=-a,a+=s;a>0;i=256*i+t[e+l],l+=h,a-=8);for(u=i&(1<<-a)-1,i>>=-a,a+=r;a>0;u=256*u+t[e+l],l+=h,a-=8);if(0===i)i=1-c;else{if(i===f)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,r),i-=c}return(p?-1:1)*u*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var u,s,f,c=8*i-o-1,a=(1<<c)-1,l=a>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,u=a):(u=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-u))<1&&(u--,f*=2),(e+=u+l>=1?h/f:h*Math.pow(2,1-l))*f>=2&&(u++,f/=2),u+l>=a?(s=0,u=a):u+l>=1?(s=(e*f-1)*Math.pow(2,o),u+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),u=0));o>=8;t[n+p]=255&s,p+=y,s/=256,o-=8);for(u=u<<o|s,c+=o;c>0;t[n+p]=255&u,p+=y,u/=256,c-=8);t[n+p-y]|=128*d}},function(t,e,n){"use strict";var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,n){"use strict";t.exports=function(t){!function e(){var n=!0,r=!1;do{r=!0,n=!1,t.call(this,function(){r?n=!0:e()}),r=!1}while(n)}()}},function(t,e,n){"use strict";(function(t,e){!function(t,n){if(!t.setImmediate){var r,o,i,u,s,f=1,c={},a=!1,l=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){y(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){y(t.data)},r=function(t){i.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,r=function(t){var e=l.createElement("script");e.onreadystatechange=function(){y(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(y,0,t)}:(u="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(u)&&y(+e.data.slice(u.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(u+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[f]=o,r(f),f++},h.clearImmediate=p}function p(t){delete c[t]}function y(t){if(a)setTimeout(y,0,t);else{var e=c[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),a=!1}}}}}("undefined"==typeof self?void 0===t?void 0:t:self)}).call(this,n(7),n(3))},function(t,e,n){"use strict";(function(t,r){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.hasNextTick=e.hasSetImmediate=void 0,e.fallback=l,e.wrap=h;var i,u=n(56),s=(i=u)&&i.__esModule?i:{default:i};var f,c=e.hasSetImmediate="function"==typeof t&&t,a=e.hasNextTick="object"===(void 0===r?"undefined":o(r))&&"function"==typeof r.nextTick;function l(t){setTimeout(t,0)}function h(t){return function(e){var n=(0,s.default)(arguments,1);t(function(){e.apply(null,n)})}}f=c?t:a?r.nextTick:l,e.default=h(f)}).call(this,n(20).setImmediate,n(3))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e|=0;for(var n=Math.max(t.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=t[e+o];return r},t.exports=e.default},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var c=n(17),a=n(19),l=n(8),h=n(9),p=n(2),y=n(22).Types,d=n(21).emitError,v=p("pull-plex:chan");v.err=p("pull-plex:chan:err");var m=function(t){function e(t){var n,i,s,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,s=u(e).call(this),n=!s||"object"!==r(s)&&"function"!=typeof s?f(i):s,t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}({initiator:!1},t),n._id=t.id,n._name=t.name,n._plex=t.plex,n._open=t.open,n._initiator=t.initiator,n._endedRemote=!1,n._endedLocal=!1,n._destroy=!1,n.MSG=n._initiator?y.OUT_MESSAGE:y.IN_MESSAGE,n.END=n._initiator?y.OUT_CLOSE:y.IN_CLOSE,n.RESET=n._initiator?y.OUT_RESET:y.IN_RESET,n._log("new channel",n._name),n._msgs=c(function(t){n._log("source closed",t),t&&"boolean"!=typeof t&&l(d,f(f(n)),t)}),n._source=n._msgs,n.sink=(h=f(f(n)),function(t){var e=a(function(){t(null,function(t,n){if(!h._endedLocal){if(h._endedLocal=t||!1,!0===t)return h.endChan();if(t||h._destroy)return h.destroyChan(),h.emit("error",t||h._destroy),void h.destroy();h.sendMsg(n),e()}})});e()}),n}var n,p,m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,h),n=e,(p=[{key:"_log",value:function(t,e){v.enabled&&v({op:t,name:this._name,id:this._id,endedLocal:this._endedLocal,endedRemote:this._endedRemote,initiator:this._initiator,data:e&&e.toString()||""})}},{key:"push",value:function(t){this._log("push"),this._msgs.push(t)}},{key:"close",value:function(t){this._log("close",t),this._endedRemote||(this._endedRemote=t||!0,this._msgs.end(this._endedRemote),this.emit("close",t),this.plex=null)}},{key:"destroy",value:function(t){this._log("destroy",t),this._destroy=t||"channel destroyed!",this.close(this._destroy)}},{key:"openChan",value:function(t){this.open||(this.open=!0,this._plex.push([this._id,y.NEW,t!==this._id.toString()?t:this._id.toString()]))}},{key:"sendMsg",value:function(t){this._log("sendMsg",t),this.open||this.openChan(this.name),this._plex.push([this._id,this.MSG,t])}},{key:"endChan",value:function(){this._log("endChan"),this.open&&this._plex.push([this._id,this.END])}},{key:"destroyChan",value:function(){this._log("destroyChan"),this.open&&this._plex.push([this._id,this.RESET])}},{key:"source",get:function(){return this._source}},{key:"id",get:function(){return this._id}},{key:"open",get:function(){return this._open},set:function(t){this._open=t}},{key:"name",get:function(){return this._name}},{key:"destroyed",get:function(){return this._endedRemote&&this._endedLocal}}])&&i(n.prototype,p),m&&i(n,m),e}();t.exports=m},function(t,e,n){"use strict";(function(t){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(f){o=!0,i=f}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=n(59),i=n(18),u=n(2),s=u("pull-plex:coder");s.err=u("pull-plex:coder:err");var f=t.alloc(0);e.encode=function(){var e=t.allocUnsafe(10240),n=0;return i(function(r){var i=n;o.encode(r[0]<<3|r[1],e,n),n+=o.encode.bytes,o.encode(r[2]?r[2].length:0,e,n),n+=o.encode.bytes,this.queue(e.slice(i,n)),10240-n<100&&(e=t.allocUnsafe(10240),n=0),this.queue(r[2]?r[2]:f)})};var c={PARSING:0,READING:1};e.decode=function(){var e=c.PARSING,n=function(t){var n=r(function(t){var e=0,n=0;try{var r=o.decode(t);return e+=o.decode.bytes,n=o.decode(t,e),[r,e+=o.decode.bytes,n]}catch(i){s.err(i)}return[]}(t),3),i=n[0],u=n[1],f=n[2];if(void 0!==i){var a={id:i>>3,type:7&i,data:[]};return e=c.READING,[t.slice(u),a,f]}return[t]},u=function(n,r,o){if(o<=0)return e=c.PARSING,[0,n,r];var i=o-n.length;i<0&&(i=0);var u=o-i;if(n.length>0){var s=t.isBuffer(n)?n:t.from(n);r.push(s.slice(0,u))}return i<=0&&(e=c.PARSING),[i,n.slice(u),r]},f=0,a=null,l=!1,h=[];return i(function(o){var i=this;!function s(){if(o&&o.length){if(c.PARSING===e){l&&(h.push(o),o=t.concat(h));var p=r(n(o),3);if(o=p[0],a=p[1],f=p[2],!a)return l||h.push(o),void(l=!0);h=[],l=!1}if(c.READING===e){var y=r(u(o,a.data,f),3);f=y[0],o=y[1],a.data=y[2],f<=0&&c.PARSING===e&&(a.data=t.concat(a.data),i.queue(a),a=null,f=0)}s()}}()})}}).call(this,n(16).Buffer)},function(t,e,n){"use strict";t.exports={encode:n(60),decode:n(61),encodingLength:n(62)}},function(t,e,n){"use strict";t.exports=function t(e,n,u){n=n||[];u=u||0;var s=u;for(;e>=i;)n[u++]=255&e|r,e/=128;for(;e&o;)n[u++]=255&e|r,e>>>=7;n[u]=0|e;t.bytes=u-s+1;return n};var r=128,o=-128,i=Math.pow(2,31)},function(t,e,n){"use strict";t.exports=function t(e,n){var i,u=0,n=n||0,s=0,f=n,c=e.length;do{if(f>=c)throw t.bytes=0,new RangeError("Could not decode varint");i=e[f++],u+=s<28?(i&o)<<s:(i&o)*Math.pow(2,s),s+=7}while(i>=r);t.bytes=f-n;return u};var r=128,o=127},function(t,e,n){"use strict";var r=Math.pow(2,7),o=Math.pow(2,14),i=Math.pow(2,21),u=Math.pow(2,28),s=Math.pow(2,35),f=Math.pow(2,42),c=Math.pow(2,49),a=Math.pow(2,56),l=Math.pow(2,63);t.exports=function(t){return t<r?1:t<o?2:t<i?3:t<u?4:t<s?5:t<f?6:t<c?7:t<a?8:t<l?9:10}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=n(9).EventEmitter,c=n(64).Connection,a=n(8),l=n(2),h=n(15),p=l("libp2p-mplex:muxer");function y(){}p.err=l("libp2p-mplex:muxer:error");var d=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=i(this,u(e).call(this))).conn=t,r.multiplex=n,r.multicodec=h,n.on("close",function(){return r.emit("close")}),n.on("error",function(t){return r.emit("error",t)}),n.on("stream",function(t){t.on("error",function(t){p.err("receiver stream errored",t)}),r.emit("stream",new c(t,r.conn))}),r}var n,r,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,f),n=e,(r=[{key:"newStream",value:function(t){t=t||y;var e=this.multiplex.createStream();e.on("error",function(t){p.err("initiator stream errored",t)});var n=new c(e,this.conn);return a(t,null,n),n}},{key:"end",value:function(t){if(t=t||y,this.multiplex.destroyed)return a(t);this.multiplex.once("close",t),this.multiplex.close()}}])&&o(n.prototype,r),l&&o(n,l),e}();t.exports=d},function(t,e,n){"use strict";e.Connection=n(65)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=n(66);t.exports=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.peerInfo=null,this.conn=o(),e?this.setInnerConn(e,n):n&&(this.info=n)}var e,n,i;return e=t,(n=[{key:"getPeerInfo",value:function(t){return this.info&&this.info.getPeerInfo?this.info.getPeerInfo(t):this.peerInfo?void t(null,this.peerInfo):t(new Error("Peer Info not set yet"))}},{key:"setPeerInfo",value:function(t){if(this.info&&this.info.setPeerInfo)return this.info.setPeerInfo(t);this.peerInfo=t}},{key:"getObservedAddrs",value:function(t){if(this.info&&this.info.getObservedAddrs)return this.info.getObservedAddrs(t);t(null,[])}},{key:"setInnerConn",value:function(t,e){this.conn.resolve(t),this.info=e||t}},{key:"source",get:function(){return this.conn.source}},{key:"sink",get:function(){return this.conn.sink}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";var r=n(67),o=n(68);t.exports=function(){var t=r(),e=o();return{source:t,sink:e,resolve:function(n){t.resolve(n.source),e.resolve(n.sink)}}}},function(t,e,n){"use strict";t.exports=function(){var t,e,n,r,o=function(o,i){t?t(o,i):o?(r=o,n=i):e=i};return o.resolve=function(o){if(t)throw new Error("already resolved");if(!(t=o))throw new Error("no read cannot resolve!"+t);e&&o(null,e),n&&o(r,n)},o.abort=function(t){o.resolve(function(e,n){n(t||!0)})},o}},function(t,e,n){"use strict";t.exports=function(t){var e,n=!1;function r(r){if(!r)throw new Error("must be passed a readable");e=r,n&&t(e)}return r.resolve=r.ready=r.start=function(o){return n=!0,t=o||t,e&&t(e),r},r}}])});
//# sourceMappingURL=index.min.js.map